<!-- HEADER -->
<app-navigation-bar></app-navigation-bar>

<div class="p-3 text-white">
  <form [formGroup]="updateUserFormGroup" (ngSubmit)="onSubmit()">
    <h3 class="fw-normal fs-3" style="letter-spacing: 1px;">Update User</h3>

    <div class="row mb-3">
      <div class="form-floating">
        <input type="text" id="firstname" formControlName="firstname" class="form-control">
        <label class="form-label mx-2" for="firstname" style="margin-left: 0px;">Firstname</label>
      </div>
      <div>
        <div *ngIf="firstname?.invalid && (firstname?.dirty || firstname?.touched)" class="alert alert-danger px-2 m-0">

          <div *ngIf="firstname?.errors?.['required'] || firstname?.errors?.['notOnlyWhitespace']">
            First Name is required.
          </div>

          <div *ngIf="firstname?.errors?.['minlength']">
            First Name must be at least 2 characters long.
          </div>

        </div>
      </div>
    </div>

    <div class="row mb-3">
      <div class="form-floating">
        <input type="text" id="lastname" formControlName="lastname" class="form-control">
        <label class="form-label mx-2" for="lastname" style="margin-left: 0px;">Lastname</label>
      </div>
      <div>
        <div *ngIf="lastname?.invalid && (lastname?.dirty || lastname?.touched)" class="alert alert-danger px-2 m-0">

          <div *ngIf="lastname?.errors?.['required'] || lastname?.errors?.['notOnlyWhitespace']">
            Last Name is required.
          </div>

          <div *ngIf="lastname?.errors?.['minlength']">
            Last Name must be at least 2 characters long.
          </div>

        </div>
      </div>
    </div>

    <div class="row mb-3">
      <div class="form-floating">
        <input type="email" id="email" formControlName="email" class="form-control">
        <label class="form-label mx-2" for="email" style="margin-left: 0px;">Email address</label>
      </div>
      <div>
        <div *ngIf="email?.invalid && (email?.dirty || email?.touched)" class="alert alert-danger px-2 m-0">

          <div *ngIf="email?.errors?.['required']">
            Email is required.
          </div>

          <div *ngIf="email?.errors?.['pattern']">
            Email must be a valid email address format.
          </div>

        </div>
      </div>
    </div>

    <div class="row mb-3">
      <div class="form-floating">
        <input type="password" id="password" formControlName="password" class="form-control">
        <label class="form-label mx-2" for="password" style="margin-left: 0px;">Password</label>
      </div>
      <div>
        <div *ngIf="password?.invalid && (password?.dirty || password?.touched)" class="alert alert-danger px-2 m-0">

          <div *ngIf="password?.errors?.['required']">
            Password is required.
          </div>

          <div *ngIf="password?.errors?.['pattern']">
            Password must be at least 8 characters long, contain at least one uppercase letter, one lowercase letter, one number, and one special character.
          </div>

        </div>
      </div>
    </div>

    <div class="form-floating mb-3">
      <select formControlName="selectedRoleId" class="form-select"
              id="floatingSelect" aria-label="Floating label select example">
<!--              [disabled]="loginUser.role.id != 3"> &lt;!&ndash; if login user is not super user. &ndash;&gt;-->
        <option *ngFor="let role of roles" [value]="role.id">
          {{ role.name }}
        </option>
      </select>
      <label for="floatingSelect">Role</label>
    </div>

    <div class="pt-1 mb-4">
      <button id="save-btn" class="btn btn-dark btn-block" type="submit" [disabled]="updateUserFormGroup.invalid">Save</button>&nbsp;
      <button id="back-btn" class="btn btn-dark btn-block" (click)="redirectToUserListPage()">Back</button>
    </div>
  </form>
</div>
